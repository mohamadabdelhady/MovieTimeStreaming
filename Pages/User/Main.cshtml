@page
@model MovieTimeStreaming.Pages.User.MainModel
@{
    Layout = "Shared/_Layout_User";
    ViewData["Title"] = "Main";
}
<div class="banner-img p-0" style="background-image: url('/Asset/main-banner.jpg')">
    <div class="container py-3">
        <h1 class="display-4 fw-bold">Wellcome</h1>
        <hr class="my-4">
        <p>.</p>
    </div>
</div>
<div id="app" class="d-flex justify-content-center m-5">
    <span class="card ms-2 mt-2" v-for="(item, index) in allVideos" style="width: 25rem">
        <span class="card-body">
            <img src="" />
            <p>{{item['title']}}</p>
            <p>{{item['Genre']}}</p>
            <p>{{item['mediaType']}}</p>
        </span>
    </span>
</div>
<script>
const { createApp } = Vue
    
      createApp({
        data() {
          return {
            allVideos:[],
            page:1,
            last_page:false,
          }
        },
        methods: {
            getAllVideos()
            {
                 axios.get('/api/Media/getAll?page='+this.page).then(response=> {
                                $.each(response.data, (key, v) => {
                                    this.allVideos.push(v);
                                    if (response.data.current_page==response.data.last_page){
                                        this.last_page=true;
                                    }
                
                                });
                            })
                                    this.page++;
            }
            },
            created(){
            this.getAllVideos();
            },
      }).mount('#app')
</script>